<script>
    let datos = [];
    let encabezados = [];
    let idxStock = -1;

    async function cargarCSV() {
      const url = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTDJUlMlBorJ7CrMhC7Rc442tQEOVyWo-4xvjZL19CdeO0j1GY2ELorKL9lnnb_5IG2-vlw8-RcLAhY/pub?gid=0&single=true&output=csv"; // <-- tu link aquí
      const response = await fetch(url);
      const texto = await response.text();
      const filas = texto.trim().split("\n").map(f => f.split(","));
      encabezados = filas[0];
      idxStock = encabezados.findIndex(h => h.toLowerCase().trim() === "stock");
      datos = filas.slice(1);
      mostrarTabla(datos, "Mostrando todo el inventario");
    }

    // ... resto del código igual
</script>
